{"version":3,"file":"stock-allowance-controller.js","sources":["infrastructure/controllers/stock-allowance-controller.ts"],"sourceRoot":"/","sourcesContent":["import { ControllerFunction } from \"../../adapters/express/make-express-callback\";\nimport getAllStockAllowancesByTeamIdUseCase, {\n  GetAllStockAllowancesByTeamIdUseCaseType,\n} from \"../../application/use-cases/stock-allowances/get-all-stock-allowances-by-team-id\";\n\ntype StockAllowanceControllerType = {\n  GetAllStockAllowancesByTeamIdControllerType: {\n    params: { teamId: string };\n    query: { fromDate: Date; toDate: Date };\n  };\n};\n\nconst createStockAllowanceController = (dependencies: {\n  getAllStockAllowancesByTeamIdUseCase: GetAllStockAllowancesByTeamIdUseCaseType;\n}) => {\n  const getAllStockAllowancesByTeamIdController: ControllerFunction<\n    StockAllowanceControllerType[\"GetAllStockAllowancesByTeamIdControllerType\"]\n  > = async (httpRequest) => {\n    const { teamId } = httpRequest.params;\n    const { fromDate, toDate } = httpRequest.query;\n\n    console.log({ httpRequest });\n\n    try {\n      const stockAllowances =\n        await dependencies.getAllStockAllowancesByTeamIdUseCase.execute(\n          teamId,\n          fromDate,\n          toDate\n        );\n\n      return {\n        statusCode: 200,\n        body: stockAllowances,\n      };\n    } catch (error) {\n      console.error(\"getAllStockAllowancesByTeamIdController\", error);\n      return {\n        statusCode: 500,\n        body: { error: \"Server error\" },\n      };\n    }\n  };\n  return { getAllStockAllowancesByTeamIdController };\n};\n\nconst stockAllowanceController = createStockAllowanceController({\n  getAllStockAllowancesByTeamIdUseCase,\n});\n\nexport default stockAllowanceController;\n"],"names":[],"mappings":";;;;;;;AACA,2JAE0F;AAS1F,MAAM,8BAA8B,GAAG,CAAC,YAEvC,EAAE,EAAE;IACH,MAAM,uCAAuC,GAEzC,KAAK,EAAE,WAAW,EAAE,EAAE;QACxB,MAAM,EAAE,MAAM,EAAE,GAAG,WAAW,CAAC,MAAM,CAAC;QACtC,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,WAAW,CAAC,KAAK,CAAC;QAE/C,OAAO,CAAC,GAAG,CAAC,EAAE,WAAW,EAAE,CAAC,CAAC;QAE7B,IAAI,CAAC;YACH,MAAM,eAAe,GACnB,MAAM,YAAY,CAAC,oCAAoC,CAAC,OAAO,CAC7D,MAAM,EACN,QAAQ,EACR,MAAM,CACP,CAAC;YAEJ,OAAO;gBACL,UAAU,EAAE,GAAG;gBACf,IAAI,EAAE,eAAe;aACtB,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,yCAAyC,EAAE,KAAK,CAAC,CAAC;YAChE,OAAO;gBACL,UAAU,EAAE,GAAG;gBACf,IAAI,EAAE,EAAE,KAAK,EAAE,cAAc,EAAE;aAChC,CAAC;QACJ,CAAC;IACH,CAAC,CAAC;IACF,OAAO,EAAE,uCAAuC,EAAE,CAAC;AACrD,CAAC,CAAC;AAEF,MAAM,wBAAwB,GAAG,8BAA8B,CAAC;IAC9D,oCAAoC,EAApC,6CAAoC;CACrC,CAAC,CAAC;AAEH,kBAAe,wBAAwB,CAAC","debug_id":"fb35d1b0-4bde-58e1-b27b-940530bd6162"}