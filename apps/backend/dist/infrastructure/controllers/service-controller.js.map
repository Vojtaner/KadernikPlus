{"version":3,"file":"service-controller.js","sources":["infrastructure/controllers/service-controller.ts"],"sourceRoot":"/","sourcesContent":["import { ServiceCreateOrUpdateData } from \"../../entities/service\";\nimport { ControllerFunction } from \"@/adapters/express/make-express-callback\";\nimport getAllServicesUseCase, {\n  GetAllServicesUseCaseType,\n} from \"../../application/use-cases/service/get-all-services\";\nimport addOrUpdateServiceUseCase, {\n  AddOrUpdateServiceUseCaseType,\n} from \"../../application/use-cases/service/add-or-update-service\";\nimport { WithUserId } from \"@/entities/user\";\n\ntype AddOrUpdateServiceControllerType = {\n  body: ServiceCreateOrUpdateData;\n};\ntype GetAllServicesControllerType = {};\n\nconst createServiceController = (dependencies: {\n  addOrUpdateServiceUseCase: AddOrUpdateServiceUseCaseType;\n  getAllServicesUseCase: GetAllServicesUseCaseType;\n}) => {\n  const addOrUpdateServiceController: ControllerFunction<\n    AddOrUpdateServiceControllerType\n  > = async (httpRequest) => {\n    const { serviceName, basePrice, teamId, id } = httpRequest.body;\n    const userId = httpRequest.userId;\n\n    const serviceData: WithUserId<ServiceCreateOrUpdateData> = {\n      serviceName,\n      basePrice,\n      userId,\n      teamId,\n      id,\n    };\n\n    const newService = await dependencies.addOrUpdateServiceUseCase.execute(\n      serviceData\n    );\n\n    return {\n      statusCode: 201,\n      body: newService,\n    };\n  };\n\n  const getAllServicesController: ControllerFunction<\n    GetAllServicesControllerType\n  > = async (httpRequest) => {\n    const userId = httpRequest.userId;\n\n    const services = await dependencies.getAllServicesUseCase.execute(userId);\n\n    return {\n      statusCode: 200,\n      body: services,\n    };\n  };\n\n  return {\n    addOrUpdateServiceController,\n    getAllServicesController,\n  };\n};\n\nconst serviceController = createServiceController({\n  addOrUpdateServiceUseCase,\n  getAllServicesUseCase,\n});\n\nexport default serviceController;\n"],"names":[],"mappings":";;;;;;;AAEA,4GAE8D;AAC9D,sHAEmE;AAQnE,MAAM,uBAAuB,GAAG,CAAC,YAGhC,EAAE,EAAE;IACH,MAAM,4BAA4B,GAE9B,KAAK,EAAE,WAAW,EAAE,EAAE;QACxB,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM,EAAE,EAAE,EAAE,GAAG,WAAW,CAAC,IAAI,CAAC;QAChE,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC;QAElC,MAAM,WAAW,GAA0C;YACzD,WAAW;YACX,SAAS;YACT,MAAM;YACN,MAAM;YACN,EAAE;SACH,CAAC;QAEF,MAAM,UAAU,GAAG,MAAM,YAAY,CAAC,yBAAyB,CAAC,OAAO,CACrE,WAAW,CACZ,CAAC;QAEF,OAAO;YACL,UAAU,EAAE,GAAG;YACf,IAAI,EAAE,UAAU;SACjB,CAAC;IACJ,CAAC,CAAC;IAEF,MAAM,wBAAwB,GAE1B,KAAK,EAAE,WAAW,EAAE,EAAE;QACxB,MAAM,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC;QAElC,MAAM,QAAQ,GAAG,MAAM,YAAY,CAAC,qBAAqB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE1E,OAAO;YACL,UAAU,EAAE,GAAG;YACf,IAAI,EAAE,QAAQ;SACf,CAAC;IACJ,CAAC,CAAC;IAEF,OAAO;QACL,4BAA4B;QAC5B,wBAAwB;KACzB,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,iBAAiB,GAAG,uBAAuB,CAAC;IAChD,yBAAyB,EAAzB,+BAAyB;IACzB,qBAAqB,EAArB,0BAAqB;CACtB,CAAC,CAAC;AAEH,kBAAe,iBAAiB,CAAC","debug_id":"e95e632f-d51f-5075-b895-25c134b25f99"}