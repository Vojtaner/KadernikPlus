{"version":3,"file":"get-visits-by-client-id.js","sources":["application/use-cases/visits/get-visits-by-client-id.ts"],"sourceRoot":"/","sourcesContent":["import { VisitRepositoryPort } from \"@/application/ports/visit-repository\";\nimport { ClientRepositoryPort } from \"@/application/ports/client-repository\";\nimport visitRepositoryDb from \"../../../infrastructure/data/prisma/prisma-visit-repository\";\nimport clientRepositoryDb from \"../../../infrastructure/data/prisma/prisma-client-repository\";\nimport { ClientNotFoundError } from \"./add-visit\";\nimport { VisitWithServicesWithProceduresWithStockAllowances } from \"@/infrastructure/mappers/visit-mapper\";\n\nconst createGetVisitsByClientIdUseCase = (dependencies: {\n  visitRepositoryDb: VisitRepositoryPort;\n  clientRepositoryDb: ClientRepositoryPort;\n}) => {\n  return {\n    execute: async (\n      clientId: string,\n      userId: string\n    ): Promise<VisitWithServicesWithProceduresWithStockAllowances[]> => {\n      const clientExists = await dependencies.clientRepositoryDb.findById(\n        clientId,\n        userId\n      );\n\n      if (!clientExists) {\n        throw ClientNotFoundError(clientId);\n      }\n\n      const visits = await dependencies.visitRepositoryDb.findAll(clientId);\n\n      return visits;\n    },\n  };\n};\n\nconst getVisitsByClientIdUseCase = createGetVisitsByClientIdUseCase({\n  visitRepositoryDb: visitRepositoryDb,\n  clientRepositoryDb: clientRepositoryDb,\n});\n\nexport type CreateGetVisitsByClientIdUseCaseType = ReturnType<\n  typeof createGetVisitsByClientIdUseCase\n>;\n\nexport default getVisitsByClientIdUseCase;\n"],"names":[],"mappings":";;;;;;;AAEA,0HAA4F;AAC5F,4HAA8F;AAC9F,2CAAkD;AAGlD,MAAM,gCAAgC,GAAG,CAAC,YAGzC,EAAE,EAAE;IACH,OAAO;QACL,OAAO,EAAE,KAAK,EACZ,QAAgB,EAChB,MAAc,EACiD,EAAE;YACjE,MAAM,YAAY,GAAG,MAAM,YAAY,CAAC,kBAAkB,CAAC,QAAQ,CACjE,QAAQ,EACR,MAAM,CACP,CAAC;YAEF,IAAI,CAAC,YAAY,EAAE,CAAC;gBAClB,MAAM,IAAA,+BAAmB,EAAC,QAAQ,CAAC,CAAC;YACtC,CAAC;YAED,MAAM,MAAM,GAAG,MAAM,YAAY,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAEtE,OAAO,MAAM,CAAC;QAChB,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,0BAA0B,GAAG,gCAAgC,CAAC;IAClE,iBAAiB,EAAE,iCAAiB;IACpC,kBAAkB,EAAE,kCAAkB;CACvC,CAAC,CAAC;AAMH,kBAAe,0BAA0B,CAAC","debug_id":"0edd1987-9147-517f-bcf0-5867204fa62e"}