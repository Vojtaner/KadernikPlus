{"version":3,"file":"add-visit.js","sources":["application/use-cases/visits/add-visit.ts"],"sourceRoot":"/","sourcesContent":["import { Visit, VisitCreateData } from \"@/entities/visit\";\nimport { VisitRepositoryPort } from \"@/application/ports/visit-repository\";\nimport { WithUserId } from \"@/entities/user\";\nimport visitRepositoryDb from \"../../../infrastructure/data/prisma/prisma-visit-repository\";\nimport { CreatedVisit } from \"../../../infrastructure/mappers/visit-mapper\";\n\nexport function UserNotFoundError(id: string): Error {\n  const error = new Error(`User with ID '${id}' not found.`);\n  error.name = \"UserNotFoundError\";\n  return error;\n}\n\nexport function ClientNotFoundError(id: string): Error {\n  const error = new Error(`Client with ID '${id}' not found.`);\n  error.name = \"ClientNotFoundError\";\n  return error;\n}\n\nconst createAddVisitUseCase = (dependencies: {\n  visitRepositoryDb: VisitRepositoryPort;\n}) => ({\n  execute: async (\n    visitData: WithUserId<VisitCreateData>\n  ): Promise<CreatedVisit> => {\n    const visit = await visitRepositoryDb.add(visitData);\n\n    // a další logika s přidáním návštěvy emaily, jiné databázové operace atd...\n\n    return visit;\n  },\n});\n\nexport type CreateAddVisitUseCaseType = ReturnType<\n  typeof createAddVisitUseCase\n>;\n\nexport const addVisitUseCase = createAddVisitUseCase({ visitRepositoryDb });\n"],"names":[],"mappings":";;;;;;;;AAMA,8CAIC;AAED,kDAIC;AAbD,0HAA4F;AAG5F,SAAgB,iBAAiB,CAAC,EAAU;IAC1C,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,iBAAiB,EAAE,cAAc,CAAC,CAAC;IAC3D,KAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC;IACjC,OAAO,KAAK,CAAC;AACf,CAAC;AAED,SAAgB,mBAAmB,CAAC,EAAU;IAC5C,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,mBAAmB,EAAE,cAAc,CAAC,CAAC;IAC7D,KAAK,CAAC,IAAI,GAAG,qBAAqB,CAAC;IACnC,OAAO,KAAK,CAAC;AACf,CAAC;AAED,MAAM,qBAAqB,GAAG,CAAC,YAE9B,EAAE,EAAE,CAAC,CAAC;IACL,OAAO,EAAE,KAAK,EACZ,SAAsC,EACf,EAAE;QACzB,MAAM,KAAK,GAAG,MAAM,iCAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAErD,4EAA4E;QAE5E,OAAO,KAAK,CAAC;IACf,CAAC;CACF,CAAC,CAAC;AAMU,QAAA,eAAe,GAAG,qBAAqB,CAAC,EAAE,iBAAiB,EAAjB,iCAAiB,EAAE,CAAC,CAAC","debug_id":"970d7dca-8a7d-5f04-9fc6-5b7b8d8e9129"}