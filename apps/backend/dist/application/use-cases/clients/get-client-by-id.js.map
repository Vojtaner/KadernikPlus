{"version":3,"file":"get-client-by-id.js","sources":["application/use-cases/clients/get-client-by-id.ts"],"sourceRoot":"/","sourcesContent":["import { Client } from \"@/entities/client\";\nimport { ClientRepositoryPort } from \"../../ports/client-repository\";\nimport clientRepositoryDb from \"../../../infrastructure/data/prisma/prisma-client-repository\";\nimport { VisitRepositoryPort } from \"@/application/ports/visit-repository\";\nimport visitRepositoryDb from \"../../../infrastructure/data/prisma/prisma-visit-repository\";\n\n// Custom error for application layer\nclass ClientNotFoundError extends Error {\n  constructor(id: string) {\n    super(`Client with ID '${id}' not found.`);\n    this.name = \"ClientNotFoundError\";\n  }\n}\n\nconst createGetClientByIdUseCase = (dependencies: {\n  clientRepositoryDb: ClientRepositoryPort;\n  visitRepositoryDb: VisitRepositoryPort;\n}) => {\n  return {\n    execute: async (clientId: string, userId: string): Promise<Client> => {\n      const client = await dependencies.clientRepositoryDb.findById(\n        clientId,\n        userId\n      );\n\n      if (!client) {\n        throw new ClientNotFoundError(clientId);\n      }\n\n      return client;\n    },\n  };\n};\n\nexport type CreateGetClientByIdUseCaseType = ReturnType<\n  typeof createGetClientByIdUseCase\n>;\n\nconst getClientByIdUseCase = createGetClientByIdUseCase({\n  clientRepositoryDb,\n  visitRepositoryDb,\n});\n\nexport default getClientByIdUseCase;\n"],"names":[],"mappings":";;;;;;;AAEA,4HAA8F;AAE9F,0HAA4F;AAE5F,qCAAqC;AACrC,MAAM,mBAAoB,SAAQ,KAAK;IACrC,YAAY,EAAU;QACpB,KAAK,CAAC,mBAAmB,EAAE,cAAc,CAAC,CAAC;QAC3C,IAAI,CAAC,IAAI,GAAG,qBAAqB,CAAC;IACpC,CAAC;CACF;AAED,MAAM,0BAA0B,GAAG,CAAC,YAGnC,EAAE,EAAE;IACH,OAAO;QACL,OAAO,EAAE,KAAK,EAAE,QAAgB,EAAE,MAAc,EAAmB,EAAE;YACnE,MAAM,MAAM,GAAG,MAAM,YAAY,CAAC,kBAAkB,CAAC,QAAQ,CAC3D,QAAQ,EACR,MAAM,CACP,CAAC;YAEF,IAAI,CAAC,MAAM,EAAE,CAAC;gBACZ,MAAM,IAAI,mBAAmB,CAAC,QAAQ,CAAC,CAAC;YAC1C,CAAC;YAED,OAAO,MAAM,CAAC;QAChB,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAMF,MAAM,oBAAoB,GAAG,0BAA0B,CAAC;IACtD,kBAAkB,EAAlB,kCAAkB;IAClB,iBAAiB,EAAjB,iCAAiB;CAClB,CAAC,CAAC;AAEH,kBAAe,oBAAoB,CAAC","debug_id":"5e7ae038-a4bc-5e42-8ec1-552cde546431"}