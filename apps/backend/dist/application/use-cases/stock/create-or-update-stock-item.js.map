{"version":3,"file":"create-or-update-stock-item.js","sources":["application/use-cases/stock/create-or-update-stock-item.ts"],"sourceRoot":"/","sourcesContent":["import { StockItemBuyData, StockItemCreateData } from \"@/entities/stock-item\";\nimport { StockItemRepositoryPort } from \"../../ports/stock-item-repository\";\nimport stockItemRepositoryDb from \"../../../infrastructure/data/prisma/prisma-stock-item-repository\";\nimport { isNewStockItem } from \"../../../infrastructure/controllers/stock-item-controller\";\nimport { StockItem } from \"@prisma/client\";\nimport { httpError } from \"../../../adapters/express/httpError\";\n\nconst createOrUpdateCreateStockItemUseCase = (dependencies: {\n  stockItemRepositoryDb: StockItemRepositoryPort;\n}) => {\n  return {\n    execute: async (\n      data: StockItemCreateData | StockItemBuyData\n    ): Promise<StockItem | undefined> => {\n      if (isNewStockItem(data)) {\n        if (!data.itemName || data.itemName.trim() === \"\") {\n          throw httpError(\"Název skladové položky nesmí být prázdný.\", 422);\n        }\n        if (!data.unit || data.unit.trim() === \"\") {\n          throw httpError(\"Jednotka skladové položky nesmí být prázdná.\", 422);\n        }\n        if (data.quantity < 0) {\n          throw httpError(\"Množství skladové položky nesmí být záporné.\", 400);\n        }\n        if (data.threshold < 0) {\n          throw httpError(\"Práh skladové položky nesmí být záporný.\", 400);\n        }\n      }\n\n      const newOrUpdatedStockItem =\n        await dependencies.stockItemRepositoryDb.createOrUpdateStockItem(data);\n\n      return newOrUpdatedStockItem;\n    },\n  };\n};\n\nexport type CreateOrUpdateStockItemUseCaseType = ReturnType<\n  typeof createOrUpdateCreateStockItemUseCase\n>;\n\nconst createOrUpdateStockItemUseCase = createOrUpdateCreateStockItemUseCase({\n  stockItemRepositoryDb,\n});\n\nexport default createOrUpdateStockItemUseCase;\n"],"names":[],"mappings":";;;;;;;AAEA,oIAAqG;AACrG,qGAA2F;AAE3F,mEAAgE;AAEhE,MAAM,oCAAoC,GAAG,CAAC,YAE7C,EAAE,EAAE;IACH,OAAO;QACL,OAAO,EAAE,KAAK,EACZ,IAA4C,EACZ,EAAE;YAClC,IAAI,IAAA,sCAAc,EAAC,IAAI,CAAC,EAAE,CAAC;gBACzB,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;oBAClD,MAAM,IAAA,qBAAS,EAAC,2CAA2C,EAAE,GAAG,CAAC,CAAC;gBACpE,CAAC;gBACD,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;oBAC1C,MAAM,IAAA,qBAAS,EAAC,8CAA8C,EAAE,GAAG,CAAC,CAAC;gBACvE,CAAC;gBACD,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC;oBACtB,MAAM,IAAA,qBAAS,EAAC,8CAA8C,EAAE,GAAG,CAAC,CAAC;gBACvE,CAAC;gBACD,IAAI,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,CAAC;oBACvB,MAAM,IAAA,qBAAS,EAAC,0CAA0C,EAAE,GAAG,CAAC,CAAC;gBACnE,CAAC;YACH,CAAC;YAED,MAAM,qBAAqB,GACzB,MAAM,YAAY,CAAC,qBAAqB,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;YAEzE,OAAO,qBAAqB,CAAC;QAC/B,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAMF,MAAM,8BAA8B,GAAG,oCAAoC,CAAC;IAC1E,qBAAqB,EAArB,sCAAqB;CACtB,CAAC,CAAC;AAEH,kBAAe,8BAA8B,CAAC","debug_id":"e84d701d-e16a-597e-8564-52ac81057a3f"}